## Contexte

Certains programmes exécutables utilisent la fonction `system()` pour lancer des commandes shell. Par exemple :

`system("ls -lA /chemin/vers/fichier");`

Cette commande **demande au shell d’exécuter `ls`** sur un fichier particulier. L’astuce est que le binaire ne vérifie pas **d’où vient `ls`**, il se fie au `PATH` de l’environnement.

## Objectif pédagogique

Comprendre comment on peut :

1. Intercepter l’exécution d’une commande via `system()`.
    
2. Fournir un script personnalisé pour simuler le comportement de la commande demandée.
    
3. Lire ou afficher des informations sans exécuter directement la commande originale.
    

## Étapes générales

1. **Créer un script “factice”**
    
    - Un simple script Bash suffit. Exemple :
        
    
    `#!/bin/bash echo "Ceci est mon faux ls !"`
    
    - Le script peut faire n’importe quelle action que tu veux observer ou manipuler.
        
2. **Rendre le script exécutable**
    
    `chmod +x /tmp/mon_fake_ls`
    
3. **Modifier la variable `PATH`**
    
    - Le binaire cherchera les commandes dans les dossiers listés dans `PATH`, **dans l’ordre**.
        
    - En mettant ton dossier en premier :
        
    
    `export PATH=/tmp:$PATH`
    
    - Maintenant, quand le binaire appelle `ls`, il exécute **ton script** avant le vrai `ls`.
        
4. **Exécuter le binaire**
    
    - Depuis le répertoire contenant le binaire :
        
    
    `./mon_binaire`
    
    - Vérifie que ton script s’exécute bien.
        

## Bonnes pratiques

- Travailler dans `/tmp` ou un répertoire où tu as les permissions.
    
- Ne jamais modifier de fichiers système.
    
- Comprendre que ce mécanisme est **une démonstration pédagogique de manipulation de `PATH` et de `system()`**, et non un hack universel.
    

## Résumé

- Les programmes utilisant `system()` exécutent des commandes via le shell.
    
- `PATH` détermine quelle commande est appelée.
    
- Tu peux créer un script factice et placer ton dossier en début de `PATH` pour intercepter ces appels.
    
- C’est un excellent moyen d’apprendre comment les programmes peuvent être manipulés via l’environnement, **sans avoir besoin de connaissances avancées en C**.